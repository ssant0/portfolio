---
import '../../styles/nav.css';
---

<nav
  class="sticky top-0 w-full z-50 flex justify-around py-8 px-16 max-lg:justify-center max-lg:gap-0 max-md:mx-0 max-[660px]:bg-[#f1f2f5] max-[660px]:py-4 max-[660px]:px-4 max-[660px]:shadow-sm"
>
  <div class="max-lg:hidden"></div>
  <div
    id="links-container"
    class="
    bg-[#f1f2f5]
    py-3 px-5
    ms-auto max-lg:ms-0 flex items-center justify-between rubik text-xl gap-6 max-[660px]:text-lg max-[660px]:gap-3 max-[382px]:text-base transition-all duration-300"
  >
    <button
      class="animate__animated animate__zoomIn animate__fast lb active cursor-pointer px-4 py-1 rounded-xl hover:text-[#2d5d54] transition-colors duration-300 border-2 border-solid border-transparent max-[382px]:px-2 max-[382px]:py-0.5"
      >Inicio</button
    >
    <button
      class="animate__animated animate__zoomIn animate__delay-1s animate__fast lb cursor-pointer px-4 py-1 rounded-xl hover:text-[#2d5d54] transition-colors duration-300 border-2 border-solid border-transparent max-[382px]:px-2 max-[382px]:py-0.5"
      >Proyectos</button
    >
    <button
      class="animate__animated animate__zoomIn animate__delay-2s animate__fast lb cursor-pointer px-4 py-1 rounded-xl hover:text-[#2d5d54] transition-colors duration-300 border-2 border-solid border-transparent max-[382px]:px-2 max-[382px]:py-0.5"
      >Contacto</button
    >
  </div>
</nav>

<script>
  const links: NodeListOf<HTMLButtonElement> = document.querySelectorAll(".lb");

  const recentProjects = document.getElementById("recent-projects");
  const contact = document.getElementById("contact");
  const intro = document.getElementsByTagName("body");

  const linksContainer = document.getElementById("links-container");

  const myScroll = (button: HTMLButtonElement, target: HTMLElement) => {
    button.addEventListener("click", () => {
      links.forEach((l) => l.classList.remove("active"));
      button.classList.add("active");

      window.scrollTo({
        top: target.offsetTop,
        behavior: "smooth",
      });
    });
  };

  myScroll(links[0], intro[0]);
  myScroll(links[1], recentProjects!);
  myScroll(links[2], contact!);

  if (linksContainer) {
    const handleScroll = () => {
      if (window.scrollY > 10) {
        linksContainer.classList.add("on-scroll-nav");
      } else {
        linksContainer.classList.remove("on-scroll-nav");
      }
    };

    window.addEventListener("scroll", handleScroll);
  }
</script>

<style>
  .lb.active {
    border-color: #2d5d54;
    color: #2d5d54;
  }

</style>
